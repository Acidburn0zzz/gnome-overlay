From 86e0a1b67796563e48162c92243eee79413ce1ee Mon Sep 17 00:00:00 2001
From: Priit Laes <plaes@plaes.org>
Date: Sun, 7 Mar 2010 19:04:19 +0200
Subject: [PATCH] =?UTF-8?q?Bug=C2=A0612099=20-=20run-assert-msg-test.sh=20test=20failure?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Fix run-assert-msg-test to work with libtool-2.2.x.
---
 tests/run-assert-msg-test.sh |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/tests/run-assert-msg-test.sh b/tests/run-assert-msg-test.sh
index bf05a7c..2abc97d 100755
--- a/tests/run-assert-msg-test.sh
+++ b/tests/run-assert-msg-test.sh
@@ -29,8 +29,12 @@ if ! type gdb >/dev/null 2>&1; then
   exit 0
 fi
 
+msg_test="assert-msg-test"
+if [ -e ".libs/lt-$msg_test" ]; then
+	msg_test="lt-$msg_test"
+fi
 echo_v "Running gdb on assert-msg-test"
-OUT=$(gdb --batch --ex run --ex "print (char*) __glib_assert_msg" .libs/lt-assert-msg-test 2> $error_out) || \
+OUT=$(gdb --batch --ex run --ex "print (char*) __glib_assert_msg" .libs/$msg_test 2> $error_out) || \
   fail "failed to run gdb"
 
 echo_v "Checking if assert message is in __glib_assert_msg"
-- 
1.7.0

