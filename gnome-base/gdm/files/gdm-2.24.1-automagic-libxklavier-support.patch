 configure.ac |   30 ++++++++++++++++++++----------
 1 files changed, 20 insertions(+), 10 deletions(-)

diff --git a/configure.ac b/configure.ac
index be6580d..04d58cc 100644
--- a/configure.ac
+++ b/configure.ac
@@ -106,17 +106,26 @@ PKG_CHECK_MODULES(SIMPLE_GREETER,
 AC_SUBST(SIMPLE_GREETER_CFLAGS)
 AC_SUBST(SIMPLE_GREETER_LIBS)
 
-PKG_CHECK_MODULES(LIBXKLAVIER,
-        libxklavier >= $LIBXKLAVIER_REQUIRED_VERSION,
-        have_libxklavier=yes,
-        have_libxklavier=no)
-if test "x$have_libxklavier" = "xyes" ; then
-  AC_DEFINE(HAVE_LIBXKLAVIER, [], [Define if we have libxklavier])
+AC_ARG_ENABLE([libxklavier],
+	AS_HELP_STRING([--enable-libxklavier],
+		       [Enable libxklavier support @<:@default=yes@:>@]),
+	enable_libxklavier=$enableval,
+	enable_libxklavier=yes)
+have_libxklavier=no
+if test "x$enable_libxklavier" = "xyes"; then
+   PKG_CHECK_MODULES(LIBXKLAVIER,
+	  libxklavier >= $LIBXKLAVIER_REQUIRED_VERSION,
+          have_libxklavier=yes,
+          have_libxklavier=no)
+   if test "x$have_libxklavier" = "xyes" ; then
+      AC_DEFINE(HAVE_LIBXKLAVIER, [], [Define if we have libxklavier])
+   fi
+   AC_SUBST(HAVE_LIBXKLAVIER)
+   AC_SUBST(LIBXKLAVIER_CFLAGS)
+   AC_SUBST(LIBXKLAVIER_LIBS)
 fi
+
 AM_CONDITIONAL(HAVE_LIBXKLAVIER, test x$have_libxklavier = xyes)
-AC_SUBST(HAVE_LIBXKLAVIER)
-AC_SUBST(LIBXKLAVIER_CFLAGS)
-AC_SUBST(LIBXKLAVIER_LIBS)
 
 PKG_CHECK_MODULES(POLKIT_GNOME,
         polkit-gnome >= $POLICYKIT_REQUIRED_VERSION,
@@ -1420,6 +1429,7 @@ echo \
 "        Xinerama support:         ${XINERAMA_SUPPORT}
         XDMCP support:            ${XDMCP_SUPPORT}
         SELinux support:          ${with_selinux}
-        ConsoleKit support:       ${use_console_kit}
+        ConsoleKit  support:      ${use_console_kit}
+	Libxklavier support:	  ${have_libxklavier} 
         Build with RBAC:          ${msg_rbac_shutdown}
 "
